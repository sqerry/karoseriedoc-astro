---
import ResetCSS from '@appzic/astro-reset-css';
import Header from '../layouts/Header.astro';
import Footer from '../layouts/Footer.astro';
import { ViewTransitions } from 'astro:transitions';
import { getLangFromUrl } from '../i18n';
import SEO from '../components/SEO.astro';

export interface Props {
    title: string;
    description: string;
    image?: string;
    type?: 'website' | 'article';
    noindex?: boolean;
}

const { title, description, image, type = 'website', noindex = false } = Astro.props;
const lang = getLangFromUrl(Astro.url);
---

<!doctype html>
<html lang={lang}>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <!-- Favicon -->
        <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <link rel="shortcut icon" href="/favicon.ico" />
        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
        <link rel="manifest" href="/site.webmanifest" />
        <meta name="theme-color" content="#ffc727" />

        <!-- SEO Component (meta tags, OG, Twitter, structured data) -->
        <SEO title={title} description={description} image={image} type={type} noindex={noindex} />

        <!-- Preconnect for performance -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" />
        <link rel="dns-prefetch" href="https://submit-form.com" />
        <link rel="dns-prefetch" href="https://www.google.com" />

        <!-- Preload LCP hero image -->
        <link rel="preload" as="image" href="/images/deformace-small.webp" media="(max-width: 767px)" fetchpriority="high" />
        <link rel="preload" as="image" href="/images/deformace.webp" media="(min-width: 768px)" fetchpriority="high" />

        <!-- Preload critical fonts -->
        <link
            rel="preload"
            href="https://fonts.googleapis.com/css2?family=Heebo:wght@100..900&family=Russo+One&display=swap"
            as="style"
        />
        <link
            href="https://fonts.googleapis.com/css2?family=Heebo:wght@100..900&family=Russo+One&display=swap"
            rel="stylesheet"
        />

        <meta name="generator" content={Astro.generator} />
        <ResetCSS />
        <title>{title}</title>
        <ViewTransitions />
        <!-- Uploadcare CSS - deferred load for non-critical styling -->
        <link
            rel="preload"
            href="https://cdn.jsdelivr.net/npm/@uploadcare/file-uploader@v1/web/uc-file-uploader-regular.min.css"
            as="style"
            onload="this.onload=null;this.rel='stylesheet'"
        />
        <noscript>
            <link
                rel="stylesheet"
                href="https://cdn.jsdelivr.net/npm/@uploadcare/file-uploader@v1/web/uc-file-uploader-regular.min.css"
            />
        </noscript>
    </head>

    <body>
        <Header />
        <slot />
        <Footer />
        <script src="../script.js"></script>

        <style lang="scss" is:global>
            @property --n {
                syntax: '<integer>';
                initial-value: 0;
                inherits: false;
            }
            html {
                font-size: 62.5%;
                background-color: $clr-black;
                color: $clr-white;
                scroll-padding-top: 70px;

                @media (max-width: 767px) {
                    scroll-padding-top: 0;
                }

                &:has(.hamburger-menu.active) {
                    overflow: hidden;
                }
            }
            .page-title {
                @media (max-width: 767px) {
                    font-size: 2.5rem;
                }
            }
            .my-config {
                --uc-primary-oklch-dark: 97% 0 0;
                --uc-primary-oklch-light: 10% 0 0;
            }
            .social-links {
                display: flex;
                align-items: center;
                gap: 1rem;
                justify-content: flex-end;
                a {
                    width: 2.4rem;
                    height: 2.4rem;
                }
                .facebook {
                }
                .instagram {
                }
            }
            .icon {
                margin-right: 1rem;
                &.location:before {
                    content: '\ea58';
                }
                &.email:before {
                    content: '\ea44';
                }
                &.tel:before {
                    content: '\ea54';
                }
                &.checkmark:before {
                    content: '\eaaf';
                }
                &.clock:before {
                    content: '\eb9c';
                }

                &:before {
                    font-size: 1.4rem;
                    font-family: $ff-icons;
                    color: $clr-primary;
                }
            }
            .swiper {
                width: 100%;

                .swiper-pagination-bullet {
                    background-color: $clr-primary;
                    width: 1rem;
                    height: 1rem;
                }
                .swiper-button-prev,
                .swiper-button-next {
                    color: $clr-white;
                    width: 5rem;
                    height: 5rem;
                    transition: 0.3s;
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;

                    &:hover {
                        background-color: $clr-primary-hover;
                    }

                    &:after {
                        font-size: 2rem;
                    }
                }
            }
            body {
                font-size: 1.6rem;
                font-family: $ff-primary;

                &:has(.header.sticky) {
                    @media (max-width: 1023px) {
                        margin-top: 79px;
                    }
                }
            }
            .container {
                width: 146rem;
                padding: 0 2rem;
                max-width: calc(100% - 4rem);
                margin-left: auto;
                margin-right: auto;

                @media (max-width: 1023px) {
                }
                @media (max-width: 767px) {
                    width: 100%;
                    max-width: calc(100% - 2rem);
                    padding: 0 1rem;
                }
            }
            h1,
            h2,
            h3,
            h4,
            h5,
            .title,
            .sub-title {
                font-family: 'Russo One', sans-serif;
            }

            a {
                color: $clr-white;
                transition: 0.3s;

                &:hover,
                &:focus {
                    color: $clr-primary !important;
                }
            }

            .btn {
                color: $clr-black;
                background-color: $clr-primary;
                min-height: 45px;
                max-width: 180px;
                display: flex;
                align-items: center;
                font-family: $ff-primary;
                justify-content: center;
                font-weight: 600;

                &:hover {
                    color: $clr-black !important;
                    background-color: $clr-primary-hover;
                }
            }
        </style>
    </body>
</html>
