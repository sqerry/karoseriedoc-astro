---
import Layout from '../layouts/Layout.astro'
import PageHeader from './PageHeader.astro'
import { localizePath, localizeUrl } from 'astro-i18next'

const { frontmatter, Content } = Astro.props
---

<PageHeader pageName={frontmatter.title} imageSrc={frontmatter.headerImage} />
<main class="service-detail">
    <div class="container">
        <div class="service-content">
            <div class="service-content-inner markdown-content">
                <Content />
            </div>
            <div class="service-usp">
                <ul>
                    {
                        frontmatter.uspItems.map((item) => (
                            <li>
                                <span class="checkmark" />
                                <span class="text">{item.text}</span>
                            </li>
                        ))
                    }
                </ul>
            </div>
        </div>
        <div class="contact-banner">
            <div class="contact-banner-inner">
                <h2>Potřebujete poradit?</h2>
                <p>Napište nám na email a my vám ozveme váše potřeby.</p>
                <a class="btn btn-primary" href={localizePath('/kontakt')} target="_blank" class="button"
                    >Kontaktujte nás!</a
                >
            </div>
        </div>
    </div>
</main>

<script>
    function activateServicesLink() {
        const servicesLink = document.getElementById('services-link')
        const serviceDetailElement = document.querySelector('.service-detail')
        if (servicesLink && serviceDetailElement) {
            servicesLink.classList.add('active-page')
        }
    }

    activateServicesLink()

    document.addEventListener('astro:page-load', activateServicesLink)
</script>

<style lang="scss">
    .service-detail {
        padding-top: 7rem;

        @media (max-width: 767px) {
            padding-top: 2rem;
        }
    }

    .service-content {
        .service-content-inner.markdown-content {
            padding: 2rem;
            background-color: #1d2226;

            :global(h1) {
                color: $clr-primary !important;
                margin-bottom: 1.9rem !important;
                font-size: 2.1rem;
            }

            :global(p) {
                margin-bottom: 19px !important;
            }
        }
    }
    .container {
        display: flex;
        gap: 4rem;

        @media (max-width: 991px) {
            flex-direction: column;
        }
    }
    .service-content {
        flex: 2;
    }
    .contact-banner {
        flex: 1;

        .contact-banner-inner {
            padding: 4.8rem;
            background-image: url('/images/hero.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            box-shadow: 0 0 0 1000px rgba(0, 0, 0, 0.4) inset;
            min-height: 350px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        h2 {
            font-size: 3rem;
            margin-bottom: 1.9rem;
            line-height: 1.2;
        }

        p {
            margin-bottom: 1.9rem !important;
        }
    }
    .service-usp {
        margin-top: 4rem;
        ul {
            list-style-type: none;
            padding: 0;
            display: grid;
            grid-template-columns: 1fr 1fr;
            column-gap: 1rem;

            @media (max-width: 767px) {
                grid-template-columns: 1fr;
                row-gap: 1rem;
            }
        }

        li {
            display: flex;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .text {
            width: calc(100% - 30px);
        }

        .checkmark {
            display: inline-block;
            width: 20px;
            height: 20px;
            margin-right: 10px;
            background-color: $clr-primary;
            border-radius: 50%;
            position: relative;

            &::after {
                content: '';
                position: absolute;
                left: 7px;
                top: 4px;
                width: 5px;
                height: 10px;
                border: solid white;
                border-width: 0 2px 2px 0;
                transform: rotate(45deg);
            }
        }
    }
</style>
