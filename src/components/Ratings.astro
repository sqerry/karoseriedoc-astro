---
import Title from '../components/Title.astro';
import RatingCard from '../components/RatingCard.astro';
import { useTranslations, type Lang } from '../i18n';

interface Props {
    lang?: Lang;
}

const { lang = 'cs' } = Astro.props;
const t = useTranslations(lang);
---

<div class="ratings">
    <Title title={t('ratings.title')} subtitle={t('ratings.subtitle')} position="center" />
    <div class="ratings-wrapper">
        <div class="swiper mySwiper ratings-swiper" data-direction="right" data-speed="slow">
            <div class="swiper-wrapper">
                <div class="swiper-slide">
                    <RatingCard
                        link="https://www.google.com/maps/reviews/data=!4m8!14m7!1m6!2m5!1sChdDSUhNMG9nS0VJQ0FnSURtdWZ5Vm1BRRAB!2m1!1s0x0:0x15f7903e6ed3d5df!3m1!1s2@1:CIHM0ogKEICAgIDmufyVmAE%7CCgsI0bzrjwYQ2OCibQ%7C?coh=219816&entry=tts&g_ep=EgoyMDI0MDgxNC4xKgBIAVAD"
                        imgSrc="/images/reviews/review-1.png"
                        name="Marek Å uraba"
                        description="Dnes mi pÃ¡n dokÃ¡zal, Å¾e je opravdu kouzelnÃ­k!!! MÄ›l jsem na svÃ© audi velmi Å¡patnÄ› promÃ¡ÄklÃ½ lem zadnÃ­ho blatnÃ­ku, u nejmenovanÃ© konkurence mi Å™ekli, Å¾e tohle nikdo nevytÃ¡hne na 100% protoÅ¾e to bylo fakt blbÄ› promaÄklÃ© pÅ™Ã­mo v lemu. NicmÃ©nÄ› pÃ¡n od KaroserieDoc Å™ekl Å¾e to zvlÃ¡dne a taky zvlÃ¡dl!! KdyÅ¾ jsem si byl auto vyzvednout nikdo by nepoznal Å¾e tam nÄ›kdy promÃ¡Äklina byla! A cena proti konkurenci byla opravdu luxusnÃ­, maximÃ¡lnÃ­ spokojenost. PÃ¡novi moc dÄ›kuji a urÄitÄ› pÅ™ijedu zas kdyÅ¾ to nÄ›kde bouchnu ðŸ˜…"
                        date="27.2.2022"
                        stars={5}
                    />
                </div>
                <div class="swiper-slide">
                    <RatingCard
                        link="https://maps.app.goo.gl/kNHxsnDNX8UrkhtV7"
                        imgSrc="/images/reviews/review-2.png"
                        name="EluÅ¡enka"
                        description="ChtÄ›la bych se s VÃ¡mi podÄ›lit o skvÄ›lou pÃ©Äi mÃ©ho auta.ðŸ‘Œ Jak spasovanÃ­ dÃ­lÅ¯ ,tak oÅ¡etÅ™enÃ­ podvozku na jedniÄku.ðŸ‘Œ SkvÄ›lÃ¡ komunikace i prÃ¡ce mohu jen doporuÄit.ðŸŒ¼ VÃ­m na koho se vÅ¾dy obrÃ¡tit.ðŸ¤—"
                        date="27.2.2022"
                        stars={5}
                    />
                </div>
                <div class="swiper-slide">
                    <RatingCard
                        link="https://maps.app.goo.gl/svWzkndeamB43FuK6"
                        imgSrc="/images/reviews/review-3.png"
                        name="Drahoslav Koura"
                        description="ProfesionÃ¡lnÃ­ prÃ¡ce a vstÅ™Ã­cnost.  PromÃ¡ÄklÃ½ zadnÃ­ blatnÃ­k u 3dv auta od fotbalovÃ©ho mÃ­Äe. Hloubka cca 12 mm a prÅ¯mÄ›r 220 mm.Vypadalo to jak od medicinbalu. MÃ¡ zlatÃ© a Å¡ikovnÃ© ruce. NepoznÃ¡te, Å¾e se autÃ­Äku nÄ›co stalo. Moc dÃ­ky"
                        date="27.2.2023"
                        stars={5}
                    />
                </div>
                <div class="swiper-slide">
                    <RatingCard
                        link="https://maps.app.goo.gl/PFHEVPqqQDCKrwAx7"
                        imgSrc="/images/reviews/review-4.png"
                        name="Jana HrdliÄkovÃ¡"
                        description="PerfektnÃ­, mÅ¯Å¾eme jen doporuÄit  - oprava promÃ¡ÄklÃ© kapoty trvala sotva hodinku, na kapotÄ› nenÃ­ poznat, Å¾e by byla kdy poÅ¡kozenÃ¡. S cenou jsme takÃ© spokojenÃ­ - konkurence by stÃ¡la rozhodnÄ› vÃ­c! A co urÄitÄ› chci vyzvednout, je pÅ™Ã­stup k zÃ¡kaznÃ­kovi - mÃ¡me vÄ›tÅ¡inou problÃ©m zajet do servisu kvÅ¯li pracovnÃ­mu vytÃ­Å¾enÃ­, ale pÃ¡n nÃ¡m velmi ochotnÄ› vyÅ¡el vstÅ™Ã­c a opravu provedl v nedÄ›li. TakÅ¾e, i kdyÅ¾ doufÃ¡m, Å¾e uÅ¾ se naÅ¡emu autu nic nestane, ale pokud ano, vÃ­me, na koho se obrÃ¡tit."
                        date="27.2.2023"
                        stars={5}
                    />
                </div>
                <div class="swiper-slide">
                    <RatingCard
                        link="https://maps.app.goo.gl/a3taNkBFd9Yc2oiJ9"
                        imgSrc="/images/reviews/review-5.png"
                        name="Matteo Borgorelli"
                        description="Pan mi opravil nalakoval zrezlÃ½ blatnik. S opravou jsem vÃ­ce neÅ¾ spokojen. MnohokrÃ¡t dÄ›kuji ."
                        date="27.2.2021"
                        stars={5}
                    />
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    import Swiper from 'swiper/bundle'
    import { Autoplay } from 'swiper/modules'
    import 'swiper/css'

    function addAnimation() {
        const animationAdded = document.querySelector('.ratings-wrapper.animation-added')

        if (animationAdded) return

        const ratingsWrapper = document.querySelector('.ratings-wrapper')
        let swiper2 = new Swiper('.ratings-swiper', {
            spaceBetween: 10,
            slidesPerView: 1,
            loop: true,
            autoplay: {
                delay: 0,
                disableOnInteraction: false,
            },
            speed: 10000,
            grabCursor: true,
            breakpoints: {
                767: {
                    slidesPerView: 3,
                },
            },
        })

        var transformValue
        const swiperWrapper = document.querySelector('.ratings-wrapper .swiper-wrapper')

        swiperWrapper.addEventListener('mouseenter', function () {
            swiper2.autoplay.stop()
            transformValue = this.style.transform
            this.style.transitionDuration = '0ms'
            this.style.transform = 'translate3d(' + swiper2.getTranslate() + 'px, 0px, 0px)'
        })

        swiperWrapper.addEventListener('mouseleave', function () {
            this.style.transitionDuration = swiper2.params.speed + 'ms'
            this.style.transform = transformValue
            swiper2.autoplay.start()
        })
        swiperWrapper.addEventListener('touchstart', function () {
            swiper2.autoplay.stop()
            transformValue = this.style.transform
            this.style.transitionDuration = '0ms'
            this.style.transform = 'translate3d(' + swiper2.getTranslate() + 'px, 0px, 0px)'
        })

        swiperWrapper.addEventListener('touchend', function () {
            this.style.transitionDuration = swiper2.params.speed + 'ms'
            this.style.transform = transformValue
            swiper2.autoplay.start()
        })
        ratingsWrapper.classList.add('animation-added')
    }

    addAnimation()

    document.addEventListener('DOMContentLoaded', addAnimation)
    document.addEventListener('astro:after-swap', addAnimation)
</script>
<style lang="scss">
    .swiper-wrapper {
        transition-timing-function: linear !important;
    }
    .ratings-wrapper {
        padding-block: 1rem;
        -webkit-mask: linear-gradient(90deg, transparent, white 20%, white 80%, transparent);
        mask: linear-gradient(90deg, transparent, white 20%, white 80%, transparent);
    }
</style>
